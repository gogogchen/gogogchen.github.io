<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•¸å­¸é¡Œè§£ç¯„ä¾‹ - å¹³å‡åˆ†</title>
    <style>
        body {
            font-family: "Microsoft JhengHei", Arial, sans-serif;
            max-width: 900px;
            margin: 50px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        .question {
            background-color: #e3f2fd;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            font-size: 18px;
            line-height: 1.6;
        }
        .hint {
            background-color: #fff9e6;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            font-size: 16px;
            color: #666;
        }
        .chart-container {
            margin: 30px 0;
            padding: 20px;
            background-color: #fafafa;
            border-radius: 8px;
        }
        .chart-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #2c3e50;
            text-align: center;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
        }
        td {
            padding: 20px;
            text-align: center;
            font-size: 20px;
            border: 2px solid #e0e0e0;
            background-color: white;
        }
        .score-cell {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            font-weight: bold;
            font-size: 32px;
        }
        .total-row {
            background-color: #fff3e0;
            font-weight: bold;
            color: #e65100;
        }
        .average-row {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            font-weight: bold;
            font-size: 24px;
            color: #2c3e50;
        }
        .question-mark {
            font-size: 40px;
            color: #ff9800;
        }
        .summary {
            text-align: center;
            margin-top: 20px;
            padding: 15px;
            background-color: #f5f5f5;
            border-radius: 8px;
            font-size: 16px;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“Š æ•¸å­¸é¡Œè§£ç¯„ä¾‹ - å¹³å‡åˆ†</h1>
        
        <div class="question">
            <strong>é¡Œç›®ï¼š</strong><br>
            <span id="questionText"></span>
        </div>

        <div class="hint" id="hint" style="display: none;">
            ğŸ’¡ æç¤ºï¼š<span id="hintText"></span>
        </div>

        <div class="chart-container">
            <div class="chart-title">ğŸ“‹ åˆ†æ•¸çµ±è¨ˆè¡¨</div>
            
            <table id="scoreTable">
                <thead>
                    <tr>
                        <th>æ¬¡æ•¸</th>
                        <th>åˆ†æ•¸</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                </tbody>
            </table>

            <div class="summary" id="summary"></div>
        </div>
    </div>

    <script>
        // å¾ URL ç²å–åƒæ•¸
        function getUrlParams() {
            const params = new URLSearchParams(window.location.search);
            
            // è§£æåˆ†æ•¸åˆ—è¡¨ (æ ¼å¼: label1:score1,label2:score2)
            const scoresString = params.get('scores') || 'ç¬¬ä¸€æ¬¡+ç¬¬äºŒæ¬¡:173,ç¬¬ä¸‰æ¬¡:97';
            const scores = scoresString.split(',').map(item => {
                const [label, score] = item.split(':');
                return { label, score: parseFloat(score) };
            });
            
            return {
                question: params.get('question') || 'æ²›æ€ç¬¬ä¸€æ¬¡å’Œç¬¬äºŒæ¬¡é»˜æ›¸çš„åˆ†æ•¸ç¸½å’Œæ˜¯ 173 åˆ†ï¼Œç¬¬ä¸‰æ¬¡é»˜æ›¸çš„åˆ†æ•¸æ˜¯ 97 åˆ†ã€‚ä»–é€™ä¸‰æ¬¡é»˜æ›¸çš„å¹³å‡åˆ†æ•¸æ˜¯____________åˆ†ã€‚',
                scores: scores,
                totalLabel: params.get('totalLabel') || 'ç¸½åˆ†',
                averageLabel: params.get('averageLabel') || 'å¹³å‡åˆ†',
                showHint: params.get('hint') === 'true'
            };
        }

        // åˆå§‹åŒ–é é¢
        function init() {
            const params = getUrlParams();
            
            // è¨ˆç®—ç¸½åˆ†
            let total = 0;
            params.scores.forEach(item => {
                total += item.score;
            });
            
            // è¨ˆç®—æ¬¡æ•¸ï¼ˆå‡è¨­åˆä½µçš„æ¬¡æ•¸å¾æ¨™ç±¤ä¸­æå–ï¼‰
            let count = 0;
            params.scores.forEach(item => {
                if (item.label.includes('+')) {
                    // è¨ˆç®—åŒ…å«å¹¾å€‹æ¬¡æ•¸
                    count += item.label.split('+').length;
                } else {
                    count += 1;
                }
            });
            
            const average = total / count;
            
            // è¨­ç½®é¡Œç›®
            document.getElementById('questionText').innerHTML = params.question;
            
            // è¨­ç½®æç¤ºï¼ˆå¦‚æœéœ€è¦ï¼‰
            if (params.showHint) {
                document.getElementById('hint').style.display = 'block';
                let hintText = '';
                params.scores.forEach((item, index) => {
                    if (index > 0) hintText += ' + ';
                    hintText += item.score;
                });
                document.getElementById('hintText').textContent = 
                    `ç¸½åˆ† = ${hintText} = ${total}ï¼›å¹³å‡åˆ† = ${total} Ã· ${count} = ?`;
            }
            
            // ç”Ÿæˆè¡¨æ ¼
            const tableBody = document.getElementById('tableBody');
            
            // æ·»åŠ æ¯æ¬¡åˆ†æ•¸
            params.scores.forEach((item, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${item.label}</td>
                    <td class="score-cell">${item.score} åˆ†</td>
                `;
                tableBody.appendChild(row);
            });
            
            // æ·»åŠ ç¸½åˆ†è¡Œ
            const totalRow = document.createElement('tr');
            totalRow.className = 'total-row';
            totalRow.innerHTML = `
                <td>${params.totalLabel}</td>
                <td><span class="question-mark">?</span> åˆ†</td>
            `;
            tableBody.appendChild(totalRow);
            
            // æ·»åŠ å¹³å‡åˆ†è¡Œ
            const avgRow = document.createElement('tr');
            avgRow.className = 'average-row';
            avgRow.innerHTML = `
                <td>${params.averageLabel}</td>
                <td><span class="question-mark">?</span> åˆ†</td>
            `;
            tableBody.appendChild(avgRow);
            
            // è¨­ç½®æ‘˜è¦
            document.getElementById('summary').textContent = 
                `ç¸½å…± ${count} æ¬¡ï¼Œç¸½åˆ† ${total} åˆ† Ã· ${count} = ?`;
        }

        // é é¢è¼‰å…¥æ™‚åˆå§‹åŒ–
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
